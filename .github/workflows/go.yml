# This workflow will build a golang project
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-go

name: Go

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:

  build:
    runs-on:  macos-latest
    steps:
    - uses: actions/checkout@v3

    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: 1.20.1
    - name: Set up Go
      uses: actions/setup-go@v3
      with:
        go-version: 1.20.1
    - name: npm/yarn/pnpm install
      uses: Jaid/action-npm-install@v1.2.4
      with:
        # Can be "npm", "yarn", "pnpm" or "auto". "auto" will determine the package manager by looking into the repo's files. This is very accurate, so you normally don't want to change this.
        packageManager: "npm"
    - name: Wails Build Action
      # You may pin to the exact commit or the version.
      # uses: dAppServer/wails-build-action@ea084a9005380833a7ae035ad0ba046e03073273
      uses: dAppServer/wails-build-action@v1
      with:
        build-platform: darwin/universal
        wails-version: "v2.2.0"
        # Wails version to use
        # Webview2 installer method [download,embed,browser,error]
        go-version: 1.18
    - name: Download a Build Artifact
      uses: actions/download-artifact@v3.0.2
